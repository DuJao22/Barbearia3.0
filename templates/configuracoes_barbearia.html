{% extends "base.html" %}

{% block title %}Configurações da Barbearia - {{ configuracoes_barbearia.nome_barbearia if configuracoes_barbearia else 'Barbearia Premium' }}{% endblock %}

{% block content %}
<div class="card">
    <h1><i class="fas fa-cog"></i> Configurações da Barbearia</h1>
    <p>Gerencie as informações e configurações da sua barbearia</p>
</div>

<div class="card">
    <form method="POST" enctype="multipart/form-data">
        <h3><i class="fas fa-store"></i> Informações Básicas</h3>
        
        <div class="grid-2">
            <div class="form-group">
                <label for="nome_barbearia">Nome da Barbearia:</label>
                <input type="text" id="nome_barbearia" name="nome_barbearia" class="form-control" 
                       value="{{ configuracoes.nome_barbearia if configuracoes else 'Barbearia Premium' }}" required>
            </div>

            <div class="form-group">
                <label for="logo_barbearia">Logo da Barbearia:</label>
                <input type="file" id="logo_barbearia" name="logo_barbearia" class="form-control" accept="image/*">
                {% if configuracoes and configuracoes.logo_url %}
                    <small style="color: #666;">Logo atual: <img src="{{ configuracoes.logo_url }}" alt="Logo atual" style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover; margin-left: 10px;"></small>
                {% endif %}
            </div>
        </div>

        <div class="form-group">
            <label for="descricao">Descrição:</label>
            <textarea id="descricao" name="descricao" class="form-control" rows="3" placeholder="Descreva sua barbearia...">{{ configuracoes.descricao if configuracoes else '' }}</textarea>
        </div>

        <h3 style="margin-top: 2rem;"><i class="fas fa-map-marker-alt"></i> Localização e Contato</h3>
        
        <div class="form-group">
            <label for="endereco">Endereço Completo:</label>
            <input type="text" id="endereco" name="endereco" class="form-control" 
                   value="{{ configuracoes.endereco if configuracoes else '' }}" 
                   placeholder="Rua, número, bairro, cidade">
        </div>

        <div class="grid-2">
            <div class="form-group">
                <label for="telefone_contato">Telefone de Contato:</label>
                <input type="text" id="telefone_contato" name="telefone_contato" class="form-control" 
                       value="{{ configuracoes.telefone_contato if configuracoes else '' }}" 
                       placeholder="(11) 3333-4444">
            </div>

            <div class="form-group">
                <label for="whatsapp_contato">WhatsApp (Chave PIX):</label>
                <input type="text" id="whatsapp_contato" name="whatsapp_contato" class="form-control" 
                       value="{{ configuracoes.whatsapp_contato if configuracoes else '' }}" 
                       placeholder="11333344444">
            </div>
        </div>

        <h3 style="margin-top: 2rem;"><i class="fas fa-clock"></i> Funcionamento</h3>
        
        <div class="grid-2">
            <div class="form-group">
                <label for="horario_funcionamento">Horário de Funcionamento:</label>
                <input type="text" id="horario_funcionamento" name="horario_funcionamento" class="form-control" 
                       value="{{ configuracoes.horario_funcionamento if configuracoes else '08:00-18:00' }}" 
                       placeholder="08:00-18:00">
            </div>

            <div class="form-group">
                <label for="dias_funcionamento">Dias de Funcionamento:</label>
                <input type="text" id="dias_funcionamento" name="dias_funcionamento" class="form-control" 
                       value="{{ configuracoes.dias_funcionamento if configuracoes else 'Segunda a Sábado' }}" 
                       placeholder="Segunda a Sábado">
            </div>
        </div>

        <h3 style="margin-top: 2rem;"><i class="fas fa-share-alt"></i> Redes Sociais</h3>
        
        <div class="grid-2">
            <div class="form-group">
                <label for="instagram">Instagram:</label>
                <input type="text" id="instagram" name="instagram" class="form-control" 
                       value="{{ configuracoes.instagram if configuracoes else '' }}" 
                       placeholder="@barbeariaexemplo">
            </div>

            <div class="form-group">
                <label for="facebook">Facebook:</label>
                <input type="text" id="facebook" name="facebook" class="form-control" 
                       value="{{ configuracoes.facebook if configuracoes else '' }}" 
                       placeholder="facebook.com/barbeariaexemplo">
            </div>
        </div>

        <div style="margin-top: 2rem;">
            <button type="submit" class="btn" style="margin-right: 1rem;">
                <i class="fas fa-save"></i> Salvar Configurações
            </button>
            <a href="{{ url_for('dashboard_admin') }}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Voltar ao Dashboard
            </a>
        </div>
    </form>
</div>

<!-- Preview das Configurações -->
{% if configuracoes %}
<div class="card">
    <h3><i class="fas fa-eye"></i> Preview das Informações</h3>
    <div style="background: #404040; padding: 1.5rem; border-radius: 8px; border: 1px solid #555;">
        <div style="text-align: center; margin-bottom: 1rem;">
            {% if configuracoes.logo_url %}
                <img src="{{ configuracoes.logo_url }}" alt="Logo" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 1rem;">
            {% endif %}
            <h4>{{ configuracoes.nome_barbearia }}</h4>
            {% if configuracoes.descricao %}
                <p style="color: #bbb;">{{ configuracoes.descricao }}</p>
            {% endif %}
        </div>

        <div class="grid-2">
            <div>
                {% if configuracoes.endereco %}
                    <p><i class="fas fa-map-marker-alt"></i> {{ configuracoes.endereco }}</p>
                {% endif %}
                <p><i class="fas fa-clock"></i> {{ configuracoes.horario_funcionamento }} - {{ configuracoes.dias_funcionamento }}</p>
            </div>
            <div>
                {% if configuracoes.telefone_contato %}
                    <p><i class="fas fa-phone"></i> {{ configuracoes.telefone_contato }}</p>
                {% endif %}
                {% if configuracoes.whatsapp_contato %}
                    <p><i class="fab fa-whatsapp"></i> {{ configuracoes.whatsapp_contato }}</p>
                {% endif %}
            </div>
        </div>

        {% if configuracoes.instagram or configuracoes.facebook %}
        <div style="text-align: center; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #555;">
            {% if configuracoes.instagram %}
                <span style="margin-right: 1rem;"><i class="fab fa-instagram"></i> {{ configuracoes.instagram }}</span>
            {% endif %}
            {% if configuracoes.facebook %}
                <span><i class="fab fa-facebook"></i> {{ configuracoes.facebook }}</span>
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>
{% endif %}
{% endblock %}